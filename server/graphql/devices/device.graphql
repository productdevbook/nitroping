enum DeviceCategory {
  CHROME
  FIREFOX
  SAFARI
  EDGE
  OPERA
}

enum DevicePlatform {
  ANDROID
  IOS
  WEB
}

enum DeviceStatus {
  ACTIVE
  INACTIVE
  EXPIRED
}

type Device {
  id: ID!
  appId: ID!
  app: App
  token: String!
  category: DeviceCategory
  platform: DevicePlatform!
  status: DeviceStatus!
  userId: String
  metadata: JSON
  
  # Timestamps
  createdAt: Timestamp!
  updatedAt: Timestamp!
  lastSeenAt: Timestamp
}

input RegisterDeviceInput {
  appId: ID!
  token: String!
  category: DeviceCategory
  platform: DevicePlatform!
  userId: String
  metadata: JSON
}

input UpdateDeviceInput {
  status: DeviceStatus
  userId: String
  metadata: JSON
}

extend type Query {
  devices(appId: ID): [Device!]!
  device(id: ID!): Device
  deviceByToken(token: String!): Device
}

extend type Mutation {
  registerDevice(input: RegisterDeviceInput!): Device!
  updateDevice(id: ID!, input: UpdateDeviceInput!): Device!
  deleteDevice(id: ID!): Boolean!
}